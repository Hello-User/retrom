syntax = "proto3";

package retrom;

import "igdb.proto";

service Retrom {
  rpc GetGame(GetGameRequest) returns (GetGameResponse);
  rpc GetGames(GetGamesRequest) returns (GetGamesResponse);
}

message Platform {
  string id = 1;
  string name = 2;
  string path = 3;
}

message Game {
  string id = 1;
  string name = 2;
  string path = 3;
  string platform_id = 4;
}

message GameFile {
  string id = 1;
  string name = 2;
  int32 byte_size = 3;
  string path = 4;
  string hash = 5;
  string game_id = 6;
}

message Metadata {
  string id = 1;
  string description = 2;
  string cover_url = 3;
  string background_url = 4;
}

message GetPlatformsRequest {}

message GetPlatformsResponse {
  repeated Platform platforms = 1;
}

message GetPlatformRequest {
  string id = 1;
  optional bool with_games = 2;
}

message GetPlatformResponse {
  Platform platform = 1;
  repeated Game games = 2;
}

message GetGameRequest {
  string id = 1;
  optional bool with_files = 2;
}

message GetGameResponse {
  Game game = 1;
  repeated GameFile game_files = 2;
}

message GetGamesRequest {}

message GetGamesResponse {
  repeated Game games = 1;
}
